{% extends 'tienda/base.html' %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <h1 style="text-align: center; margin-bottom: 2rem;">Solicitar Producto Personalizado</h1>
    
    <div class="card">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Información de contacto -->
            <h3 style="margin-bottom: 1rem;">Información de Contacto</h3>
            <div class="form-group">
                <label for="{{ form.nombre_cliente.id_for_label }}">Nombre completo *</label>
                {{ form.nombre_cliente }}
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}">Email *</label>
                    {{ form.email }}
                </div>
                <div class="form-group">
                    <label for="{{ form.telefono.id_for_label }}">Teléfono</label>
                    {{ form.telefono }}
                </div>
            </div>
            
            <div class="form-group">
                <label for="{{ form.red_social.id_for_label }}">Red social (opcional)</label>
                {{ form.red_social }}
            </div>
            
            <!-- Detalles del pedido -->
            <h3 style="margin-bottom: 1rem; margin-top: 2rem;">Detalles del Pedido</h3>
            <div class="form-group">
                <label for="{{ form.producto_referencia.id_for_label }}">Producto de referencia (opcional)</label>
                {{ form.producto_referencia }}
            </div>

            <div class="form-group">
                <label for="{{ form.descripcion_diseno.id_for_label }}">Descripción del diseño *</label>
                {{ form.descripcion_diseno }}
            </div>

            <div class="form-group">
                <label for="{{ form.fecha_requerida.id_for_label }}">Fecha requerida (opcional)</label>
                {{ form.fecha_requerida }}
            </div>

            <!-- Plataforma -->
            <div class="form-group" style="margin-top: 1.5rem;">
                <label for="{{ form.plataforma.id_for_label }}">¿Dónde realizó el pedido?</label>
                {{ form.plataforma }}
            </div>

            <!-- Campo "Otra plataforma" (solo aparece al elegir "Otro") -->
            <div id="campo_otra_plataforma" class="form-group" style="display:none; margin-top: 1rem;">
                <label for="{{ form.otra_plataforma.id_for_label }}">Otra plataforma</label>
                {{ form.otra_plataforma }}
                <small style="color: #666;">Especifica la plataforma si seleccionaste "Otro"</small>
            </div>

            <!-- Imágenes de referencia -->
            <h3 style="margin-bottom: 1rem; margin-top: 2rem;">Imágenes de Referencia (opcional)</h3>

            <div class="form-group">
                <label for="{{ form.imagen_referencia_1.id_for_label }}">Imagen de referencia 1</label>
                {{ form.imagen_referencia_1 }}
            </div>

            <div class="form-group">
                <label for="{{ form.imagen_referencia_2.id_for_label }}">Imagen de referencia 2</label>
                {{ form.imagen_referencia_2 }}
            </div>

            <div class="form-group">
                <label for="{{ form.imagen_referencia_3.id_for_label }}">Imagen de referencia 3</label>
                {{ form.imagen_referencia_3 }}
            </div>

            <button type="submit" class="btn btn-primary" style="margin-top: 2rem; width: 100%;">
                Enviar Solicitud
            </button>
        </form>
    </div>
</div>

<!-- Script para mostrar/ocultar "Otra plataforma" -->
<script>
    const selectPlataforma = document.getElementById("id_plataforma");
    const campoOtra = document.getElementById("campo_otra_plataforma");

    function actualizarCampo() {
        if (selectPlataforma.value === "otro") {
            campoOtra.style.display = "block";
        } else {
            campoOtra.style.display = "none";
        }
    }

    selectPlataforma.addEventListener("change", actualizarCampo);
    window.onload = actualizarCampo;
</script>

{% endblock %}
